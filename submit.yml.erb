<%-
  num_nodes = bc_num_slots.blank? ? 1 : bc_num_slots.to_i
  max_cores = (node_type == ':hugemem') ? 48 : 28
  num_cores = num_cores.to_i

  num_cores = (num_cores == 0) ? max_cores : [num_cores, max_cores].min
-%>
---
batch_connect:
  template: "vnc"
script:
  native:
    resources:
      nodes: "<%= num_nodes %>:ppn=<%= num_cores %><%= node_type %>"
      software: "comsolscript"
